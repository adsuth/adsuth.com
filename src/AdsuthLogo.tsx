import * as motion from "motion/react-client"
import "./AdsuthLogo.css"
import { constraintRefAtom, themeAtom } from "./atoms"
import { useAtom } from "jotai"
import { selectRandomColor } from "./utils"
import { useState } from "react"

export function AdsuthLogo()
{
  const [ _constraintArea ] = useAtom( constraintRefAtom )
  const [ theme, setTheme ] = useAtom( themeAtom )
  const [ lastChange, setLastChange ] = useState( 0 )

  function handlePan(ev, info)
  {
    const hasEnoughTimeElapsed = ( ev.timeStamp - lastChange ) > 1000
    const movedQuickly         = ( Math.abs(info.velocity.x) > 3000 || Math.abs(info.velocity.y) > 3000 )

    if ( hasEnoughTimeElapsed && movedQuickly )
    {
      setLastChange( ev.timeStamp ) 
      setTheme( selectRandomColor( theme ) )
    }
  }
  
  return <>
    <motion.div
      initial="initial"
      whileDrag={{scale: 1.3,}}
      dragElastic={0.1}
      drag
      onPan={handlePan}
      dragConstraints={ _constraintArea }
      style={{touchAction: "none"}}
    >
      <svg width="100%" height="100%" viewBox="0 0 100 100" className="adsuth_logo" style={{touchAction: "none"}}>
        <g transform="matrix(0.121508,0,0,0.121508,258.954,-26.1016)">
          <path d="M-1406.79,315.45C-1401.89,320.998 -1397.06,326.609 -1392.29,332.28C-1378.62,348.556 -1365.54,365.335 -1353.06,382.585L-1353.05,382.603C-1349.92,386.919 -1346.84,391.266 -1343.79,395.641C-1331.25,413.658 -1319.37,432.168 -1308.18,451.134C-1309.51,454.713 -1310.88,458.27 -1312.29,461.804C-1320.48,482.253 -1330.16,501.943 -1341.2,520.74C-1341.34,520.979 -1341.48,521.219 -1341.62,521.457C-1353.63,541.805 -1367.23,561.102 -1382.26,579.174C-1391.38,559.574 -1401.33,540.432 -1412.06,521.792C-1412.76,520.564 -1413.47,519.338 -1414.19,518.115L-1414.19,518.102C-1425.09,499.406 -1436.77,481.222 -1449.19,463.594C-1449.88,462.612 -1450.58,461.631 -1451.28,460.652C-1439.24,440.723 -1429.36,419.349 -1421.97,396.853C-1421.84,396.457 -1421.71,396.061 -1421.58,395.664C-1415.07,375.579 -1410.53,354.609 -1408.19,332.981C-1407.57,327.183 -1407.1,321.338 -1406.79,315.45ZM-2038.79,709.71C-2036.95,703.174 -2035.03,696.678 -2033.01,690.222C-2015.85,703.989 -1997.76,716.652 -1978.86,728.101C-1960.6,739.162 -1941.58,749.091 -1921.9,757.789C-1922.92,761.836 -1923.9,765.901 -1924.83,769.982C-1928.64,786.639 -1931.71,803.576 -1934,820.757C-1936.86,842.201 -1938.52,864.024 -1938.9,886.156C-1938.9,886.156 -1938.98,892.6 -1938.98,895.96C-1938.98,915.409 -1937.99,934.63 -1936.07,953.575C-1940.92,951.969 -1945.75,950.311 -1950.55,948.601C-1967.63,942.525 -1984.39,935.795 -2000.81,928.441C-2003.45,927.261 -2006.07,926.064 -2008.69,924.852C-2027.71,916.047 -2046.26,906.4 -2064.29,895.959C-2064.29,874.856 -2063.34,853.974 -2061.48,833.352C-2061.22,830.464 -2060.94,827.582 -2060.64,824.705C-2058.78,806.633 -2056.22,788.766 -2052.99,771.134C-2052.06,766.07 -2051.08,761.024 -2050.04,755.999C-2046.81,740.37 -2043.06,724.934 -2038.79,709.71ZM-1529.12,461.78C-1524.23,467.802 -1519.44,473.908 -1514.75,480.095C-1506.55,490.9 -1498.67,501.952 -1491.12,513.24C-1486.5,520.133 -1482.01,527.115 -1477.64,534.18L-1477.64,534.183C-1470.68,545.44 -1464.03,556.912 -1457.71,568.586L-1457.71,568.597C-1453.74,575.917 -1449.91,583.317 -1446.21,590.793C-1440.22,602.888 -1434.58,615.183 -1429.29,627.666C-1426.24,634.867 -1423.31,642.129 -1420.5,649.452C-1415.37,662.844 -1410.63,676.437 -1406.32,690.215C-1404.3,696.673 -1402.38,703.172 -1400.54,709.71C-1396.28,724.932 -1392.52,740.366 -1389.29,755.992C-1388.25,761.018 -1387.27,766.064 -1386.34,771.13C-1383.11,788.761 -1380.55,806.627 -1378.69,824.698C-1378.39,827.577 -1378.11,830.461 -1377.85,833.35C-1375.99,853.97 -1375.04,874.851 -1375.04,895.952C-1393.09,906.4 -1411.65,916.054 -1430.68,924.864C-1433.28,926.071 -1435.89,927.261 -1438.52,928.436C-1454.95,935.796 -1471.73,942.531 -1488.82,948.611C-1493.61,950.316 -1498.42,951.97 -1503.26,953.571C-1501.44,935.624 -1500.46,917.43 -1500.36,899.028C-1500.35,898.006 -1500.35,896.983 -1500.35,895.96C-1500.35,894.936 -1500.35,893.913 -1500.36,892.891C-1500.3,890.575 -1500.43,886.151 -1500.43,886.151C-1500.81,864.019 -1502.47,842.196 -1505.33,820.753C-1507.62,803.573 -1510.69,786.637 -1514.5,769.982C-1515.43,765.899 -1516.41,761.833 -1517.43,757.785C-1522.17,738.996 -1527.85,720.582 -1534.43,702.594C-1535.04,700.908 -1535.67,699.225 -1536.3,697.546C-1543.3,678.947 -1551.26,660.813 -1560.11,643.206C-1560.61,642.205 -1561.12,641.205 -1561.63,640.207L-1561.63,640.2C-1570.69,622.437 -1580.67,605.216 -1591.5,588.601L-1591.51,588.595C-1592.12,587.658 -1592.73,586.723 -1593.35,585.79C-1604.26,569.261 -1616.02,553.339 -1628.57,538.087C-1629.72,536.685 -1630.88,535.289 -1632.05,533.899C-1644.41,519.16 -1657.51,505.061 -1671.29,491.66C-1654.08,479.022 -1636.04,467.456 -1617.25,457.061C-1598.08,446.446 -1578.13,437.051 -1557.52,428.983C-1547.72,439.612 -1538.25,450.55 -1529.12,461.78ZM-1617.37,371.397C-1613.52,374.682 -1609.71,378.007 -1605.93,381.374C-1623.15,389.119 -1639.91,397.703 -1656.16,407.073C-1656.74,407.407 -1657.32,407.742 -1657.89,408.077C-1660.49,409.586 -1663.07,411.114 -1665.64,412.663C-1684.38,423.967 -1702.42,436.33 -1719.66,449.67C-1733.23,460.161 -1746.3,471.256 -1758.84,482.914C-1761.93,485.795 -1765,488.711 -1768.04,491.66C-1781.82,505.062 -1794.92,519.162 -1807.29,533.902C-1827.49,526.352 -1846.46,516.268 -1863.82,504.037C-1880.99,491.931 -1896.58,477.723 -1910.21,461.787C-1901.08,450.554 -1891.61,439.614 -1881.81,428.983C-1877.28,424.07 -1872.68,419.222 -1868.01,414.442C-1856.86,403.027 -1845.31,391.997 -1833.39,381.374C-1829.63,378.018 -1825.83,374.702 -1821.99,371.427C-1808.23,359.69 -1794.01,348.485 -1779.35,337.842C-1777.05,336.177 -1774.75,334.525 -1772.43,332.887C-1755.4,320.836 -1737.79,309.539 -1719.66,299.043C-1701.55,309.531 -1683.96,320.819 -1666.93,332.86C-1664.61,334.507 -1662.29,336.167 -1659.98,337.842C-1645.33,348.476 -1631.12,359.671 -1617.37,371.397ZM-2017.37,396.852C-2009.97,419.358 -2000.09,440.742 -1988.05,460.678C-1987.31,461.91 -1986.55,463.137 -1985.79,464.358C-1974.87,481.885 -1962.27,498.257 -1948.22,513.247C-1933.79,528.632 -1917.83,542.562 -1900.58,554.792C-1893.36,559.911 -1885.91,564.732 -1878.26,569.238C-1876.96,569.979 -1875.67,570.727 -1874.38,571.482C-1865.19,576.714 -1855.72,581.494 -1845.98,585.793C-1826.22,594.522 -1805.38,601.267 -1783.73,605.773C-1766.28,609.402 -1748.31,611.579 -1729.94,612.172C-1726.53,612.283 -1723.11,612.338 -1719.67,612.338C-1716.23,612.338 -1712.8,612.282 -1709.38,612.172C-1691.02,611.578 -1673.05,609.4 -1655.61,605.77C-1650.16,613.428 -1644.92,621.244 -1639.89,629.212L-1639.89,629.219C-1633.19,639.843 -1626.89,650.735 -1620.99,661.876L-1620.99,661.88C-1616.6,670.161 -1612.44,678.58 -1608.51,687.127C-1603.62,697.77 -1599.1,708.613 -1594.95,719.641C-1610.03,724.113 -1625.45,727.795 -1641.16,730.638C-1646.38,731.583 -1651.63,732.435 -1656.91,733.193C-1676.26,735.97 -1696.02,737.483 -1716.1,737.643L-1716.11,737.644C-1717.29,737.653 -1718.48,737.658 -1719.67,737.658C-1720.86,737.658 -1722.05,737.653 -1723.25,737.643C-1743.32,737.483 -1763.07,735.971 -1782.42,733.194C-1787.7,732.437 -1792.95,731.585 -1798.17,730.641C-1813.88,727.797 -1829.3,724.116 -1844.38,719.644C-1864.58,713.657 -1884.16,706.254 -1903.03,697.551C-1922.28,688.67 -1940.78,678.434 -1958.41,666.966C-1976.6,655.135 -1993.85,641.993 -2010.04,627.673C-2025.74,613.79 -2040.44,598.8 -2054.01,582.826C-2055.04,581.623 -2056.05,580.414 -2057.06,579.2C-2072.1,561.12 -2085.7,541.815 -2097.72,521.457C-2097.86,521.208 -2098.01,520.959 -2098.16,520.71C-2109.19,501.922 -2118.87,482.242 -2127.05,461.806C-2128.47,458.259 -2129.84,454.69 -2131.17,451.098C-2119.99,432.146 -2108.12,413.649 -2095.58,395.644C-2092.53,391.258 -2089.44,386.9 -2086.31,382.573L-2086.3,382.555C-2073.82,365.315 -2060.74,348.546 -2047.08,332.279C-2042.31,326.596 -2037.46,320.973 -2032.55,315.414C-2032.24,321.314 -2031.78,327.171 -2031.15,332.981C-2028.82,354.597 -2024.28,375.558 -2017.77,395.633L-2017.37,396.852Z"/>
        </g>
      </svg>
    </motion.div>
    <motion.p
      className="dragTooltip"
      initial={{y: 50, opacity: 0}}
      animate={{y: 0, opacity: 1}}
      transition={{delay: 10, duration: 1}}

    >Shake me!</motion.p>
  </>
}